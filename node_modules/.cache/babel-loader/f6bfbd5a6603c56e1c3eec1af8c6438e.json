{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\mcbri\\\\capstonef\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\mcbri\\\\capstonef\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\mcbri\\\\capstonef\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\mcbri\\\\capstonef\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\mcbri\\\\capstonef\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\mcbri\\\\capstonef\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport * as $ from \"jquery\";\nimport { authEndpoint, clientId, redirectUri, scopes } from \"./config_example\";\nimport hash from \"./hash\";\nimport Player from \"./Player\"; //import logo from \"./logo.svg\";\n//import \"./App.css\";\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _super.call(this);\n    _this.state = {\n      token: null,\n      item: {\n        album: {\n          images: [{\n            url: \"\"\n          }]\n        },\n        name: \"\",\n        artists: [{\n          name: \"\"\n        }],\n        duration_ms: 0\n      },\n      is_playing: \"Paused\",\n      progress_ms: 0,\n      no_data: false\n    };\n    _this.getCurrentlyPlaying = _this.getCurrentlyPlaying.bind(_assertThisInitialized(_this));\n    _this.tick = _this.tick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Set token\n      var _token = hash.access_token;\n\n      if (_token) {\n        // Set token\n        this.setState({\n          token: _token\n        });\n        this.getCurrentlyPlaying(_token);\n      } // set interval for polling every 5 seconds\n\n\n      this.interval = setInterval(function () {\n        return _this2.tick();\n      }, 5000);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // clear the interval to save resources\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      if (this.state.token) {\n        this.getCurrentlyPlaying(this.state.token);\n      }\n    }\n  }, {\n    key: \"getCurrentlyPlaying\",\n    value: function getCurrentlyPlaying(token) {\n      var _this3 = this;\n\n      // Make a call using the token\n      $.ajax({\n        url: \"https://api.spotify.com/v1/me/player\",\n        type: \"GET\",\n        beforeSend: function beforeSend(xhr) {\n          xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n        },\n        success: function success(data) {\n          // Checks if the data is not empty\n          if (!data) {\n            _this3.setState({\n              no_data: true\n            });\n\n            return;\n          }\n\n          _this3.setState({\n            item: data.item,\n            is_playing: data.is_playing,\n            progress_ms: data.progress_ms,\n            no_data: false\n            /* We need to \"reset\" the boolean, in case the\r\n               user does not give F5 and has opened his Spotify. */\n\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"header\", {\n        className: \"App-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }\n      }, !this.state.token && /*#__PURE__*/React.createElement(\"a\", {\n        className: \"btn btn--loginApp-link\",\n        href: \"\".concat(authEndpoint, \"?client_id=\").concat(clientId, \"&redirect_uri=\").concat(redirectUri, \"&scope=\").concat(scopes.join(\"%20\"), \"&response_type=token&show_dialog=true\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }, \"Login to Spotify\"), this.state.token && !this.state.no_data && /*#__PURE__*/React.createElement(Player, {\n        item: this.state.item,\n        is_playing: this.state.is_playing,\n        progress_ms: this.state.progress_ms,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }), this.state.no_data && /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }\n      }, \"You need to be playing a song on Spotify, for something to appear here.\")));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:/Users/mcbri/capstonef/src/App.js"],"names":["React","Component","$","authEndpoint","clientId","redirectUri","scopes","hash","Player","App","state","token","item","album","images","url","name","artists","duration_ms","is_playing","progress_ms","no_data","getCurrentlyPlaying","bind","tick","_token","access_token","setState","interval","setInterval","clearInterval","ajax","type","beforeSend","xhr","setRequestHeader","success","data","join"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport * as $ from \"jquery\";\r\nimport { authEndpoint, clientId, redirectUri, scopes } from \"./config_example\";\r\nimport hash from \"./hash\";\r\nimport Player from \"./Player\";\r\n//import logo from \"./logo.svg\";\r\n//import \"./App.css\";\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      token: null,\r\n      item: {\r\n        album: {\r\n          images: [{ url: \"\" }]\r\n        },\r\n        name: \"\",\r\n        artists: [{ name: \"\" }],\r\n        duration_ms: 0\r\n      },\r\n      is_playing: \"Paused\",\r\n      progress_ms: 0,\r\n      no_data: false,\r\n    };\r\n\r\n    this.getCurrentlyPlaying = this.getCurrentlyPlaying.bind(this);\r\n    this.tick = this.tick.bind(this);\r\n  }\r\n\r\n\r\n\r\n  componentDidMount() {\r\n    // Set token\r\n    let _token = hash.access_token;\r\n\r\n    if (_token) {\r\n      // Set token\r\n      this.setState({\r\n        token: _token\r\n      });\r\n      this.getCurrentlyPlaying(_token);\r\n    }\r\n\r\n    // set interval for polling every 5 seconds\r\n    this.interval = setInterval(() => this.tick(), 5000);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // clear the interval to save resources\r\n    clearInterval(this.interval);\r\n  }\r\n\r\n  tick() {\r\n    if(this.state.token) {\r\n      this.getCurrentlyPlaying(this.state.token);\r\n    }\r\n  }\r\n\r\n\r\n  getCurrentlyPlaying(token) {\r\n    // Make a call using the token\r\n    $.ajax({\r\n      url: \"https://api.spotify.com/v1/me/player\",\r\n      type: \"GET\",\r\n      beforeSend: xhr => {\r\n        xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\r\n      },\r\n      success: data => {\r\n        // Checks if the data is not empty\r\n        if(!data) {\r\n          this.setState({\r\n            no_data: true,\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.setState({\r\n          item: data.item,\r\n          is_playing: data.is_playing,\r\n          progress_ms: data.progress_ms,\r\n          no_data: false /* We need to \"reset\" the boolean, in case the\r\n                            user does not give F5 and has opened his Spotify. */\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          \r\n          {!this.state.token && (\r\n            <a\r\n              className=\"btn btn--loginApp-link\"\r\n              href={`${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\r\n                \"%20\"\r\n              )}&response_type=token&show_dialog=true`}\r\n            >\r\n              Login to Spotify\r\n            </a>\r\n          )}\r\n          {this.state.token && !this.state.no_data && (\r\n            <Player\r\n              item={this.state.item}\r\n              is_playing={this.state.is_playing}\r\n              progress_ms={this.state.progress_ms}\r\n            />\r\n          )}\r\n          {this.state.no_data && (\r\n            <p>\r\n              You need to be playing a song on Spotify, for something to appear here.\r\n            </p>\r\n          )}\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}